# How to Publish a Blog Post

Ragnild Web uses Sanity CMS for managing blog content. Publishing a new blog post is done through the Sanity Studio interface.

## Prerequisites

Ensure the Sanity Studio is running:

```bash
cd sanity
npm run dev
```

Access the studio at: [http://localhost:3333](http://localhost:3333)

## 1. Create a New Blog Post

1. Open Sanity Studio at [http://localhost:3333](http://localhost:3333)
2. Click **Create** or **+** button
3. Select **Blog** from the document types

## 2. Fill in the Blog Post Details

### Required Fields:

- **Title**: The headline of your article
  - Example: "The Future of Cloud Computing"

- **Slug**: The URL-friendly version of your title
  - Click the **Generate** button to auto-create from title
  - Example: "future-of-cloud-computing"
  - This becomes: `ragnild.com/blog/future-of-cloud-computing`

- **Description**: Your blog post content
  - Use the Portable Text editor for rich formatting
  - Supports: Bold, italic, headings, links, lists, and more

- **Published At**: The date when the post should be published
  - Used for sorting posts (newest first)

### Optional Fields:

- **Cover Image**: A featured image for your blog post
  - Recommended size: 1200x630 pixels (or similar 16:9 aspect ratio)
  - Formats: JPG, PNG, WebP, SVG
  - Upload directly or use Sanity's image library
  - Automatic optimization and CDN delivery
  - This image appears on:
    - Blog listing page (as card thumbnail)
    - Individual blog post page (as hero image)

## 3. Write Your Content

Use the Portable Text editor in Sanity Studio:

### Supported Formatting:

- **Headings**: H1, H2, H3, H4 available
- **Bold/Italic**: Text formatting options
- **Lists**: Ordered and unordered lists
- **Links**: Add hyperlinks inline
- **Block Quotes**: For highlighted content
- **Code Blocks**: For technical content

### Content Tips:

- Keep paragraphs concise and readable
- Use headings to break up long content
- Add links to reference materials
- Write engaging introductions
- Use the rich text editor for proper formatting

## 4. Auto-Generated Features

The following are automatically generated by the system:

- **Excerpt**: Auto-generated from the first 150 characters of your content
- **Read Time**: Automatically calculated based on word count (200 words/min)
- **Author**: Defaults to "Ragnild Team"
- **Category**: Defaults to "General"

## 5. Preview and Publish

1. **Save as Draft**: Content is auto-saved as you type
2. **Preview**:
   - Click the preview button in Sanity Studio
   - Or navigate to `http://localhost:3000/blog`
3. **Publish**: Click the **Publish** button to make the post live

## 6. Edit Existing Posts

1. In Sanity Studio, navigate to the blog post list
2. Click on the post you want to edit
3. Make your changes (creates a draft)
4. Click **Publish** to update the live version

## 7. Delete Posts

1. Open the post in Sanity Studio
2. Click the menu (•••) button
3. Select **Delete**
4. Confirm deletion

## API Integration

The Next.js frontend automatically fetches blog posts from Sanity's API:
- Project ID: `iyuqyxv5`
- Dataset: `production`
- Uses Sanity's CDN for fast delivery

Posts are:
- Sorted by date (newest first)
- Delivered via Sanity's global CDN
- Displayed in a responsive grid layout

## Troubleshooting

### Posts Not Showing Up?

1. Ensure the post is **Published** (not just saved as draft)
2. Check that Sanity Studio is properly configured
3. Verify environment variables in `.env.local`
4. Check browser console for API errors

### Content Not Formatting Correctly?

- Use the Portable Text editor toolbar
- Ensure proper block formatting
- Preview before publishing

### API Connection Issues?

Check that:
- Sanity Studio is accessible
- Project ID and dataset are correct in `lib/sanity.ts`
- No CORS configuration needed (Sanity handles this automatically)

## Sanity Studio Access

For production deployments, you can access Sanity Studio at:
- Your deployed Studio URL (if deployed separately)
- Or include Studio in your Next.js app using `next-sanity`
